{
  "name": "Capture JavaScript Metadata",
  "description": "Test inline @meta: parsing in JavaScript files",
  "steps": [
    {
      "action": "create_file",
      "file": "js_meta.js",
      "content": "// @note: Add input validation for user data\n// @meta: {\"tags\":[\"enhancement\",\"validation\"],\"priority\":7}\nfunction processUser(userData) {\n    return userData;\n}\n\n// @note: Memory leak in event listener\n// @meta: {\"tags\":[\"bug\",\"memory\"],\"severity\":\"medium\",\"discovered\":\"2024-01-10\"}\nfunction setupEventListeners() {\n    document.addEventListener('click', handler);\n    // Missing cleanup\n}\n\n// @note: Refactor to use async/await\n// @meta: {\"tags\":[\"refactor\",\"tech-debt\"],\"effort\":\"small\",\"impact\":\"medium\"}\nfunction fetchData(url) {\n    return fetch(url).then(r => r.json());\n}\n"
    },
    {
      "action": "git_commit",
      "message": "Add JavaScript code with inline metadata"
    },
    {
      "action": "capture_notes",
      "file": "js_meta.js",
      "author": "JSTeam",
      "collection": "js-test",
      "metadata": "{\"language\":\"javascript\",\"framework\":\"vanilla\"}"
    },
    {
      "action": "expect_note_count",
      "count": 3,
      "collection": "js-test"
    },
    {
      "action": "expect_metadata",
      "content": "Add input validation for user data",
      "metadata_key": "priority",
      "metadata_value": "7",
      "collection": "js-test"
    },
    {
      "action": "expect_metadata",
      "content": "Add input validation for user data",
      "metadata_key": "language",
      "metadata_value": "\"javascript\"",
      "collection": "js-test"
    },
    {
      "action": "expect_metadata",
      "content": "Memory leak in event listener",
      "metadata_key": "severity",
      "metadata_value": "\"medium\"",
      "collection": "js-test"
    },
    {
      "action": "expect_metadata",
      "content": "Memory leak in event listener",
      "metadata_key": "discovered",
      "metadata_value": "\"2024-01-10\"",
      "collection": "js-test"
    },
    {
      "action": "expect_metadata",
      "content": "Refactor to use async/await",
      "metadata_key": "effort",
      "metadata_value": "\"small\"",
      "collection": "js-test"
    },
    {
      "action": "expect_metadata",
      "content": "Refactor to use async/await",
      "metadata_key": "impact",
      "metadata_value": "\"medium\"",
      "collection": "js-test"
    }
  ]
}
