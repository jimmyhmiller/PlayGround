{"type": "s-program", "use": null, "provide": {"type": "s-provide-all"}, "provided-types": {"type": "s-provide-types-none"}, "provides": [], "imports": [{"type": "s-import", "import-type": {"type": "s-const-import", "mod": "either"}, "name": {"type": "s-name", "name": "E"}}, {"type": "s-import", "import-type": {"type": "s-const-import", "mod": "option"}, "name": {"type": "s-name", "name": "O"}}, {"type": "s-import", "import-type": {"type": "s-const-import", "mod": "pprint"}, "name": {"type": "s-name", "name": "PP"}}, {"type": "s-import", "import-type": {"type": "s-const-import", "mod": "ast"}, "name": {"type": "s-name", "name": "A"}}, {"type": "s-import", "import-type": {"type": "s-const-import", "mod": "file"}, "name": {"type": "s-name", "name": "F"}}, {"type": "s-import", "import-type": {"type": "s-const-import", "mod": "string-dict"}, "name": {"type": "s-name", "name": "SD"}}, {"type": "s-import", "import-type": {"type": "s-special-import", "kind": "file", "args": ["../test-parse-helper.arr"]}, "name": {"type": "s-name", "name": "TPH"}}], "body": {"type": "s-block", "stmts": [{"ann": {"type": "a-app", "ann": {"type": "a-dot", "obj": {"type": "s-name", "name": "SD"}, "field": "StringDict"}, "args": [{"type": "a-name", "id": {"type": "s-name", "name": "A"}}]}, "body": {"type": "s-block", "stmts": [{"type": "s-let", "name": {"type": "s-bind", "shadows": false, "name": {"type": "s-name", "name": "acc"}, "ann": {"type": "a-blank"}}, "value": {"type": "s-construct", "modifier": {"type": "s-construct-normal"}, "constructor": {"type": "s-dot", "obj": {"type": "s-id", "id": {"type": "s-name", "name": "SD"}}, "field": "mutable-string-dict"}, "values": []}, "keyword-val": false}, {"ann": {"type": "a-blank"}, "body": {"type": "s-block", "stmts": [{"type": "s-for", "iterator": {"type": "s-id", "id": {"type": "s-name", "name": "each"}}, "bindings": [{"type": "s-for-bind", "bind": {"type": "s-bind", "shadows": false, "name": {"type": "s-name", "name": "f"}, "ann": {"type": "a-blank"}}, "value": {"type": "s-app", "fun": {"type": "s-dot", "obj": {"type": "s-id", "id": {"type": "s-name", "name": "F"}}, "field": "list-files"}, "args": [{"type": "s-id", "id": {"type": "s-name", "name": "path"}}]}}], "ann": {"type": "a-blank"}, "body": {"type": "s-block", "stmts": [{"type": "s-let", "name": {"type": "s-bind", "shadows": true, "name": {"type": "s-name", "name": "path"}, "ann": {"type": "a-blank"}}, "value": {"type": "s-op", "op-l": "srcloc(\"/tmp/pyret_lazy_cache_input_cc5755b295cd53e0ea9041548cbe0b3eb4e3132b88146eb636779d812d6e624a.arr\", 15, 31, 401, 15, 32, 402)", "op": "op+", "left": {"type": "s-op", "op-l": "srcloc(\"/tmp/pyret_lazy_cache_input_cc5755b295cd53e0ea9041548cbe0b3eb4e3132b88146eb636779d812d6e624a.arr\", 15, 25, 395, 15, 26, 396)", "op": "op+", "left": {"type": "s-id", "id": {"type": "s-name", "name": "path"}}, "right": {"type": "s-str", "value": "/"}}, "right": {"type": "s-id", "id": {"type": "s-name", "name": "f"}}}, "keyword-val": false}, {"type": "s-if-else", "branches": [{"type": "s-if-branch", "test": {"type": "s-app", "fun": {"type": "s-dot", "obj": {"type": "s-id", "id": {"type": "s-name", "name": "F"}}, "field": "is-file"}, "args": [{"type": "s-id", "id": {"type": "s-name", "name": "path"}}]}, "body": {"type": "s-block", "stmts": [{"type": "s-cases", "typ": {"type": "a-dot", "obj": {"type": "s-name", "name": "O"}, "field": "Option"}, "val": {"type": "s-app", "fun": {"type": "s-id", "id": {"type": "s-name", "name": "func"}}, "args": [{"type": "s-id", "id": {"type": "s-name", "name": "path"}}]}, "branches": [{"type": "s-singleton-cases-branch", "pat-loc": "srcloc(\"/tmp/pyret_lazy_cache_input_cc5755b295cd53e0ea9041548cbe0b3eb4e3132b88146eb636779d812d6e624a.arr\", 18, 12, 479, 18, 16, 483)", "name": "none", "body": {"type": "s-block", "stmts": [{"type": "s-id", "id": {"type": "s-name", "name": "nothing"}}]}}, {"type": "s-cases-branch", "pat-loc": "srcloc(\"/tmp/pyret_lazy_cache_input_cc5755b295cd53e0ea9041548cbe0b3eb4e3132b88146eb636779d812d6e624a.arr\", 19, 12, 507, 19, 21, 516)", "name": "some", "args": [{"type": "s-cases-bind", "field-type": "s-cases-bind-normal", "bind": {"type": "s-bind", "shadows": false, "name": {"type": "s-name", "name": "ans"}, "ann": {"type": "a-blank"}}}], "body": {"type": "s-block", "stmts": [{"type": "s-app", "fun": {"type": "s-dot", "obj": {"type": "s-id", "id": {"type": "s-name", "name": "acc"}}, "field": "set-now"}, "args": [{"type": "s-id", "id": {"type": "s-name", "name": "path"}}, {"type": "s-id", "id": {"type": "s-name", "name": "ans"}}]}]}}], "blocky": false}]}}, {"type": "s-if-branch", "test": {"type": "s-app", "fun": {"type": "s-dot", "obj": {"type": "s-id", "id": {"type": "s-name", "name": "F"}}, "field": "is-dir"}, "args": [{"type": "s-id", "id": {"type": "s-name", "name": "path"}}]}, "body": {"type": "s-block", "stmts": [{"type": "s-app", "fun": {"type": "s-id", "id": {"type": "s-name", "name": "help"}}, "args": [{"type": "s-id", "id": {"type": "s-name", "name": "path"}}]}]}}], "else": {"type": "s-block", "stmts": [{"type": "s-id", "id": {"type": "s-name", "name": "nothing"}}]}, "blocky": false}]}, "blocky": false}]}, "params": [], "check": null, "name": "help", "blocky": false, "doc": "", "type": "s-fun", "check-loc": null, "args": [{"type": "s-bind", "shadows": false, "name": {"type": "s-name", "name": "path"}, "ann": {"type": "a-blank"}}]}, {"type": "s-app", "fun": {"type": "s-id", "id": {"type": "s-name", "name": "help"}}, "args": [{"type": "s-id", "id": {"type": "s-name", "name": "dir"}}]}, {"type": "s-app", "fun": {"type": "s-dot", "obj": {"type": "s-id", "id": {"type": "s-name", "name": "acc"}}, "field": "freeze"}, "args": []}]}, "params": [{"type": "s-name", "name": "A"}], "check": null, "name": "map-files-in-dir-rec", "blocky": true, "doc": "", "type": "s-fun", "check-loc": null, "args": [{"type": "s-bind", "shadows": false, "name": {"type": "s-name", "name": "dir"}, "ann": {"type": "a-name", "id": {"type": "s-name", "name": "String"}}}, {"type": "s-bind", "shadows": false, "name": {"type": "s-name", "name": "func"}, "ann": {"type": "a-arrow", "args": [{"type": "a-name", "id": {"type": "s-name", "name": "String"}}], "ret": {"type": "a-app", "ann": {"type": "a-name", "id": {"type": "s-name", "name": "Option"}}, "args": [{"type": "a-name", "id": {"type": "s-name", "name": "A"}}]}, "use-parens": true}}]}, {"ann": {"type": "a-app", "ann": {"type": "a-name", "id": {"type": "s-name", "name": "Option"}}, "args": [{"type": "a-name", "id": {"type": "s-name", "name": "String"}}]}, "body": {"type": "s-block", "stmts": [{"type": "s-if-else", "branches": [{"type": "s-if-branch", "test": {"type": "s-app", "fun": {"type": "s-id", "id": {"type": "s-name", "name": "string-ends-with"}}, "args": [{"type": "s-id", "id": {"type": "s-name", "name": "path"}}, {"type": "s-str", "value": ".arr"}]}, "body": {"type": "s-block", "stmts": [{"type": "s-app", "fun": {"type": "s-id", "id": {"type": "s-name", "name": "some"}}, "args": [{"type": "s-id", "id": {"type": "s-name", "name": "path"}}]}]}}], "else": {"type": "s-block", "stmts": [{"type": "s-id", "id": {"type": "s-name", "name": "none"}}]}, "blocky": false}]}, "params": [], "check": null, "name": "keep-arr-files", "blocky": false, "doc": "", "type": "s-fun", "check-loc": null, "args": [{"type": "s-bind", "shadows": false, "name": {"type": "s-name", "name": "path"}, "ann": {"type": "a-name", "id": {"type": "s-name", "name": "String"}}}]}, {"type": "s-let", "name": {"type": "s-bind", "shadows": false, "name": {"type": "s-name", "name": "files"}, "ann": {"type": "a-blank"}}, "value": {"type": "s-app", "fun": {"type": "s-dot", "obj": {"type": "s-app", "fun": {"type": "s-id", "id": {"type": "s-name", "name": "map-files-in-dir-rec"}}, "args": [{"type": "s-str", "value": "."}, {"type": "s-id", "id": {"type": "s-name", "name": "keep-arr-files"}}]}, "field": "keys-list"}, "args": []}, "keyword-val": false}, {"type": "s-let", "name": {"type": "s-bind", "shadows": false, "name": {"type": "s-name", "name": "fix-numbers"}, "ann": {"type": "a-blank"}}, "value": {"type": "s-extend", "super": {"type": "s-dot", "obj": {"type": "s-id", "id": {"type": "s-name", "name": "A"}}, "field": "default-map-visitor"}, "fields": [{"ann": {"type": "a-blank"}, "body": {"type": "s-block", "stmts": [{"type": "s-app", "fun": {"type": "s-dot", "obj": {"type": "s-id", "id": {"type": "s-name", "name": "A"}}, "field": "s-num"}, "args": [{"type": "s-id", "id": {"type": "s-name", "name": "l"}}, {"type": "s-op", "op-l": "srcloc(\"/tmp/pyret_lazy_cache_input_cc5755b295cd53e0ea9041548cbe0b3eb4e3132b88146eb636779d812d6e624a.arr\", 39, 51, 962, 39, 52, 963)", "op": "op/", "left": {"type": "s-id", "id": {"type": "s-name", "name": "num"}}, "right": {"type": "s-id", "id": {"type": "s-name", "name": "den"}}}]}]}, "params": [], "check": null, "name": "s-frac", "blocky": false, "doc": "", "type": "s-method-field", "check-loc": null, "args": [{"type": "s-bind", "shadows": false, "name": {"type": "s-name", "name": "self"}, "ann": {"type": "a-blank"}}, {"type": "s-bind", "shadows": false, "name": {"type": "s-name", "name": "l"}, "ann": {"type": "a-blank"}}, {"type": "s-bind", "shadows": false, "name": {"type": "s-name", "name": "num"}, "ann": {"type": "a-blank"}}, {"type": "s-bind", "shadows": false, "name": {"type": "s-name", "name": "den"}, "ann": {"type": "a-blank"}}]}, {"ann": {"type": "a-blank"}, "body": {"type": "s-block", "stmts": [{"type": "s-app", "fun": {"type": "s-dot", "obj": {"type": "s-id", "id": {"type": "s-name", "name": "A"}}, "field": "s-num"}, "args": [{"type": "s-id", "id": {"type": "s-name", "name": "l"}}, {"type": "s-app", "fun": {"type": "s-id", "id": {"type": "s-name", "name": "num-to-roughnum"}}, "args": [{"type": "s-op", "op-l": "srcloc(\"/tmp/pyret_lazy_cache_input_cc5755b295cd53e0ea9041548cbe0b3eb4e3132b88146eb636779d812d6e624a.arr\", 40, 68, 1042, 40, 69, 1043)", "op": "op/", "left": {"type": "s-id", "id": {"type": "s-name", "name": "num"}}, "right": {"type": "s-id", "id": {"type": "s-name", "name": "den"}}}]}]}]}, "params": [], "check": null, "name": "s-rfrac", "blocky": false, "doc": "", "type": "s-method-field", "check-loc": null, "args": [{"type": "s-bind", "shadows": false, "name": {"type": "s-name", "name": "self"}, "ann": {"type": "a-blank"}}, {"type": "s-bind", "shadows": false, "name": {"type": "s-name", "name": "l"}, "ann": {"type": "a-blank"}}, {"type": "s-bind", "shadows": false, "name": {"type": "s-name", "name": "num"}, "ann": {"type": "a-blank"}}, {"type": "s-bind", "shadows": false, "name": {"type": "s-name", "name": "den"}, "ann": {"type": "a-blank"}}]}]}, "keyword-val": false}, {"type": "s-check", "name": null, "body": {"type": "s-block", "stmts": [{"type": "s-for", "iterator": {"type": "s-id", "id": {"type": "s-name", "name": "each"}}, "bindings": [{"type": "s-for-bind", "bind": {"type": "s-bind", "shadows": false, "name": {"type": "s-name", "name": "k"}, "ann": {"type": "a-blank"}}, "value": {"type": "s-id", "id": {"type": "s-name", "name": "files"}}}], "ann": {"type": "a-blank"}, "body": {"type": "s-block", "stmts": [{"type": "s-let", "name": {"type": "s-bind", "shadows": false, "name": {"type": "s-name", "name": "src-str"}, "ann": {"type": "a-blank"}}, "value": {"type": "s-app", "fun": {"type": "s-dot", "obj": {"type": "s-id", "id": {"type": "s-name", "name": "F"}}, "field": "file-to-string"}, "args": [{"type": "s-id", "id": {"type": "s-name", "name": "k"}}]}, "keyword-val": false}, {"type": "s-cases", "typ": {"type": "a-dot", "obj": {"type": "s-name", "name": "E"}, "field": "Either"}, "val": {"type": "s-app", "fun": {"type": "s-dot", "obj": {"type": "s-id", "id": {"type": "s-name", "name": "TPH"}}, "field": "maybe-parse"}, "args": [{"type": "s-id", "id": {"type": "s-name", "name": "src-str"}}]}, "branches": [{"type": "s-cases-branch", "pat-loc": "srcloc(\"/tmp/pyret_lazy_cache_input_cc5755b295cd53e0ea9041548cbe0b3eb4e3132b88146eb636779d812d6e624a.arr\", 47, 8, 1190, 47, 15, 1197)", "name": "left", "args": [{"type": "s-cases-bind", "field-type": "s-cases-bind-normal", "bind": {"type": "s-bind", "shadows": false, "name": {"type": "s-underscore"}, "ann": {"type": "a-blank"}}}], "body": {"type": "s-block", "stmts": [{"type": "s-id", "id": {"type": "s-name", "name": "nothing"}}]}}, {"type": "s-cases-branch", "pat-loc": "srcloc(\"/tmp/pyret_lazy_cache_input_cc5755b295cd53e0ea9041548cbe0b3eb4e3132b88146eb636779d812d6e624a.arr\", 48, 8, 1217, 48, 19, 1228)", "name": "right", "args": [{"type": "s-cases-bind", "field-type": "s-cases-bind-normal", "bind": {"type": "s-bind", "shadows": false, "name": {"type": "s-name", "name": "ast1"}, "ann": {"type": "a-blank"}}}], "body": {"type": "s-block", "stmts": [{"type": "s-let", "name": {"type": "s-bind", "shadows": true, "name": {"type": "s-name", "name": "ast1"}, "ann": {"type": "a-blank"}}, "value": {"type": "s-app", "fun": {"type": "s-dot", "obj": {"type": "s-id", "id": {"type": "s-name", "name": "ast1"}}, "field": "visit"}, "args": [{"type": "s-id", "id": {"type": "s-name", "name": "fix-numbers"}}]}, "keyword-val": false}, {"type": "s-let", "name": {"type": "s-bind", "shadows": false, "name": {"type": "s-name", "name": "tosource"}, "ann": {"type": "a-blank"}}, "value": {"type": "s-app", "fun": {"type": "s-dot", "obj": {"type": "s-id", "id": {"type": "s-name", "name": "ast1"}}, "field": "tosource"}, "args": []}, "keyword-val": false}, {"type": "s-for", "iterator": {"type": "s-id", "id": {"type": "s-name", "name": "each"}}, "bindings": [{"type": "s-for-bind", "bind": {"type": "s-bind", "shadows": false, "name": {"type": "s-name", "name": "len"}, "ann": {"type": "a-blank"}}, "value": {"type": "s-construct", "modifier": {"type": "s-construct-normal"}, "constructor": {"type": "s-id", "id": {"type": "s-name", "name": "list"}}, "values": [{"type": "s-num", "value": "40"}, {"type": "s-num", "value": "80"}, {"type": "s-num", "value": "160"}]}}], "ann": {"type": "a-blank"}, "body": {"type": "s-block", "stmts": [{"type": "s-let", "name": {"type": "s-bind", "shadows": false, "name": {"type": "s-name", "name": "re-src-str"}, "ann": {"type": "a-blank"}}, "value": {"type": "s-app", "fun": {"type": "s-dot", "obj": {"type": "s-app", "fun": {"type": "s-dot", "obj": {"type": "s-id", "id": {"type": "s-name", "name": "tosource"}}, "field": "pretty"}, "args": [{"type": "s-id", "id": {"type": "s-name", "name": "len"}}]}, "field": "join-str"}, "args": [{"type": "s-str", "value": "\n"}]}, "keyword-val": false}, {"type": "s-cases", "typ": {"type": "a-dot", "obj": {"type": "s-name", "name": "E"}, "field": "Either"}, "val": {"type": "s-app", "fun": {"type": "s-dot", "obj": {"type": "s-id", "id": {"type": "s-name", "name": "TPH"}}, "field": "maybe-parse"}, "args": [{"type": "s-id", "id": {"type": "s-name", "name": "re-src-str"}}]}, "branches": [{"type": "s-cases-branch", "pat-loc": "srcloc(\"/tmp/pyret_lazy_cache_input_cc5755b295cd53e0ea9041548cbe0b3eb4e3132b88146eb636779d812d6e624a.arr\", 54, 14, 1495, 54, 23, 1504)", "name": "left", "args": [{"type": "s-cases-bind", "field-type": "s-cases-bind-normal", "bind": {"type": "s-bind", "shadows": false, "name": {"type": "s-name", "name": "err"}, "ann": {"type": "a-blank"}}}], "body": {"type": "s-block", "stmts": [{"type": "s-check-test", "op": {"type": "s-op-is"}, "refinement": null, "left": {"type": "s-id", "id": {"type": "s-name", "name": "err"}}, "right": {"type": "s-id", "id": {"type": "s-name", "name": "ast1"}}, "cause": null}]}}, {"type": "s-cases-branch", "pat-loc": "srcloc(\"/tmp/pyret_lazy_cache_input_cc5755b295cd53e0ea9041548cbe0b3eb4e3132b88146eb636779d812d6e624a.arr\", 56, 14, 1548, 56, 25, 1559)", "name": "right", "args": [{"type": "s-cases-bind", "field-type": "s-cases-bind-normal", "bind": {"type": "s-bind", "shadows": false, "name": {"type": "s-name", "name": "ast2"}, "ann": {"type": "a-blank"}}}], "body": {"type": "s-block", "stmts": [{"type": "s-let", "name": {"type": "s-bind", "shadows": true, "name": {"type": "s-name", "name": "ast2"}, "ann": {"type": "a-blank"}}, "value": {"type": "s-app", "fun": {"type": "s-dot", "obj": {"type": "s-id", "id": {"type": "s-name", "name": "ast2"}}, "field": "visit"}, "args": [{"type": "s-id", "id": {"type": "s-name", "name": "fix-numbers"}}]}, "keyword-val": false}, {"type": "s-check-test", "op": {"type": "s-op-is-roughly"}, "refinement": null, "left": {"type": "s-app", "fun": {"type": "s-dot", "obj": {"type": "s-id", "id": {"type": "s-name", "name": "ast1"}}, "field": "visit"}, "args": [{"type": "s-dot", "obj": {"type": "s-id", "id": {"type": "s-name", "name": "A"}}, "field": "dummy-loc-visitor"}]}, "right": {"type": "s-app", "fun": {"type": "s-dot", "obj": {"type": "s-id", "id": {"type": "s-name", "name": "ast2"}}, "field": "visit"}, "args": [{"type": "s-dot", "obj": {"type": "s-id", "id": {"type": "s-name", "name": "A"}}, "field": "dummy-loc-visitor"}]}, "cause": null}]}}], "blocky": true}]}, "blocky": false}]}}], "blocky": true}]}, "blocky": true}]}, "keyword-check": true}]}}