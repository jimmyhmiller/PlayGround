{"type": "s-program", "use": null, "provide": {"type": "s-provide-none"}, "provided-types": {"type": "s-provide-types-none"}, "provides": [], "imports": [{"type": "s-import", "import-type": {"type": "s-const-import", "mod": "error"}, "name": {"type": "s-name", "name": "ERR"}}, {"type": "s-import", "import-type": {"type": "s-special-import", "kind": "file", "args": ["../../../src/arr/compiler/compile-structs.arr"]}, "name": {"type": "s-name", "name": "CS"}}, {"type": "s-import", "import-type": {"type": "s-special-import", "kind": "file", "args": ["../test-parse-helper.arr"]}, "name": {"type": "s-name", "name": "P"}}, {"type": "s-import", "import-type": {"type": "s-special-import", "kind": "file", "args": ["../test-compile-helper.arr"]}, "name": {"type": "s-name", "name": "C"}}], "body": {"type": "s-block", "stmts": [{"type": "s-let", "name": {"type": "s-bind", "shadows": false, "name": {"type": "s-name", "name": "get-parse-error"}, "ann": {"type": "a-blank"}}, "value": {"type": "s-dot", "obj": {"type": "s-id", "id": {"type": "s-name", "name": "P"}}, "field": "get-parse-error"}, "keyword-val": false}, {"type": "s-let", "name": {"type": "s-bind", "shadows": false, "name": {"type": "s-name", "name": "wss"}, "ann": {"type": "a-blank"}}, "value": {"type": "s-dot", "obj": {"type": "s-id", "id": {"type": "s-name", "name": "P"}}, "field": "wss"}, "keyword-val": false}, {"type": "s-let", "name": {"type": "s-bind", "shadows": false, "name": {"type": "s-name", "name": "next-token"}, "ann": {"type": "a-blank"}}, "value": {"type": "s-app", "fun": {"type": "s-dot", "obj": {"type": "s-construct", "modifier": {"type": "s-construct-normal"}, "constructor": {"type": "s-id", "id": {"type": "s-name", "name": "list"}}, "values": [{"type": "s-str", "value": "end"}, {"type": "s-str", "value": "foo(args no-comma)"}, {"type": "s-str", "value": "fun foo(params no-comma): nothing end"}, {"type": "s-str", "value": "data: foo end"}]}, "field": "append"}, "args": [{"type": "s-dot", "obj": {"type": "s-id", "id": {"type": "s-name", "name": "P"}}, "field": "exp-en-ops"}]}, "keyword-val": false}, {"type": "s-check", "name": "next token", "body": {"type": "s-block", "stmts": [{"type": "s-for", "iterator": {"type": "s-id", "id": {"type": "s-name", "name": "each"}}, "bindings": [{"type": "s-for-bind", "bind": {"type": "s-bind", "shadows": false, "name": {"type": "s-name", "name": "program"}, "ann": {"type": "a-blank"}}, "value": {"type": "s-id", "id": {"type": "s-name", "name": "next-token"}}}], "ann": {"type": "a-blank"}, "body": {"type": "s-block", "stmts": [{"type": "s-check-test", "op": {"type": "s-op-satisfies"}, "refinement": null, "left": {"type": "s-app", "fun": {"type": "s-id", "id": {"type": "s-name", "name": "get-parse-error"}}, "args": [{"type": "s-id", "id": {"type": "s-name", "name": "program"}}]}, "right": {"type": "s-dot", "obj": {"type": "s-id", "id": {"type": "s-name", "name": "ERR"}}, "field": "is-parse-error-next-token"}, "cause": null}]}, "blocky": false}, {"type": "s-for", "iterator": {"type": "s-id", "id": {"type": "s-name", "name": "each"}}, "bindings": [{"type": "s-for-bind", "bind": {"type": "s-bind", "shadows": false, "name": {"type": "s-name", "name": "program"}, "ann": {"type": "a-blank"}}, "value": {"type": "s-dot", "obj": {"type": "s-id", "id": {"type": "s-name", "name": "P"}}, "field": "test-en-ops"}}], "ann": {"type": "a-blank"}, "body": {"type": "s-block", "stmts": [{"type": "s-check-test", "op": {"type": "s-op-satisfies"}, "refinement": null, "left": {"type": "s-app", "fun": {"type": "s-id", "id": {"type": "s-name", "name": "get-parse-error"}}, "args": [{"type": "s-id", "id": {"type": "s-name", "name": "program"}}]}, "right": {"type": "s-dot", "obj": {"type": "s-id", "id": {"type": "s-name", "name": "ERR"}}, "field": "is-parse-error-bad-check-operator"}, "cause": null}]}, "blocky": false}]}, "keyword-check": true}, {"type": "s-let", "name": {"type": "s-bind", "shadows": false, "name": {"type": "s-name", "name": "eof"}, "ann": {"type": "a-blank"}}, "value": {"type": "s-construct", "modifier": {"type": "s-construct-normal"}, "constructor": {"type": "s-id", "id": {"type": "s-name", "name": "list"}}, "values": [{"type": "s-str", "value": "block: none"}, {"type": "s-str", "value": "check: 0 is 0"}, {"type": "s-str", "value": "data foo: bar"}, {"type": "s-str", "value": "for map(x from empty): x"}, {"type": "s-str", "value": "fun foo(x, y):"}, {"type": "s-str", "value": "import foo as"}, {"type": "s-str", "value": "include"}, {"type": "s-str", "value": "let foo = 0:"}, {"type": "s-str", "value": "provide"}, {"type": "s-str", "value": "provide-types"}, {"type": "s-str", "value": "type foo"}, {"type": "s-str", "value": "when true: 0"}, {"type": "s-str", "value": "foo ="}, {"type": "s-str", "value": "foo +"}]}, "keyword-val": false}, {"type": "s-check", "name": "coloncolon", "body": {"type": "s-block", "stmts": [{"type": "s-check-test", "op": {"type": "s-op-satisfies"}, "refinement": null, "left": {"type": "s-app", "fun": {"type": "s-id", "id": {"type": "s-name", "name": "get-parse-error"}}, "args": [{"type": "s-op", "op-l": "srcloc(\"/tmp/pyret_lazy_cache_input_9a08a5bf38fd743f665765ba351e2b90c801ecee38b0c77ea15f42198ffc44f3.arr\", 45, 37, 982, 45, 38, 983)", "op": "op+", "left": {"type": "s-op", "op-l": "srcloc(\"/tmp/pyret_lazy_cache_input_9a08a5bf38fd743f665765ba351e2b90c801ecee38b0c77ea15f42198ffc44f3.arr\", 44, 21, 943, 44, 22, 944)", "op": "op+", "left": {"type": "s-str", "value": "lam(a :: A):\n"}, "right": {"type": "s-str", "value": "  {v1; s1} :: {B; D} = f2(a)\n"}}, "right": {"type": "s-str", "value": "end"}}]}, "right": {"type": "s-dot", "obj": {"type": "s-id", "id": {"type": "s-name", "name": "ERR"}}, "field": "is-parse-error-colon-colon"}, "cause": null}]}, "keyword-check": true}, {"type": "s-check", "name": "eof", "body": {"type": "s-block", "stmts": [{"type": "s-for", "iterator": {"type": "s-id", "id": {"type": "s-name", "name": "each"}}, "bindings": [{"type": "s-for-bind", "bind": {"type": "s-bind", "shadows": false, "name": {"type": "s-name", "name": "program"}, "ann": {"type": "a-blank"}}, "value": {"type": "s-id", "id": {"type": "s-name", "name": "eof"}}}], "ann": {"type": "a-blank"}, "body": {"type": "s-block", "stmts": [{"type": "s-check-test", "op": {"type": "s-op-satisfies"}, "refinement": null, "left": {"type": "s-app", "fun": {"type": "s-id", "id": {"type": "s-name", "name": "get-parse-error"}}, "args": [{"type": "s-id", "id": {"type": "s-name", "name": "program"}}]}, "right": {"type": "s-dot", "obj": {"type": "s-id", "id": {"type": "s-name", "name": "ERR"}}, "field": "is-parse-error-eof"}, "cause": null}]}, "blocky": false}]}, "keyword-check": true}, {"type": "s-let", "name": {"type": "s-bind", "shadows": false, "name": {"type": "s-name", "name": "unterminated-string"}, "ann": {"type": "a-blank"}}, "value": {"type": "s-construct", "modifier": {"type": "s-construct-normal"}, "constructor": {"type": "s-id", "id": {"type": "s-name", "name": "list"}}, "values": [{"type": "s-str", "value": "'foo"}, {"type": "s-str", "value": "foo'"}, {"type": "s-str", "value": "\"bar"}, {"type": "s-str", "value": "bar\""}, {"type": "s-str", "value": "```baz"}, {"type": "s-str", "value": "baz```"}]}, "keyword-val": false}, {"type": "s-check", "name": "unterminated string", "body": {"type": "s-block", "stmts": [{"type": "s-for", "iterator": {"type": "s-id", "id": {"type": "s-name", "name": "each"}}, "bindings": [{"type": "s-for-bind", "bind": {"type": "s-bind", "shadows": false, "name": {"type": "s-name", "name": "program"}, "ann": {"type": "a-blank"}}, "value": {"type": "s-id", "id": {"type": "s-name", "name": "unterminated-string"}}}], "ann": {"type": "a-blank"}, "body": {"type": "s-block", "stmts": [{"type": "s-check-test", "op": {"type": "s-op-satisfies"}, "refinement": null, "left": {"type": "s-app", "fun": {"type": "s-id", "id": {"type": "s-name", "name": "get-parse-error"}}, "args": [{"type": "s-id", "id": {"type": "s-name", "name": "program"}}]}, "right": {"type": "s-dot", "obj": {"type": "s-id", "id": {"type": "s-name", "name": "ERR"}}, "field": "is-parse-error-unterminated-string"}, "cause": null}]}, "blocky": false}]}, "keyword-check": true}, {"type": "s-let", "name": {"type": "s-bind", "shadows": false, "name": {"type": "s-name", "name": "bad-operator"}, "ann": {"type": "a-blank"}}, "value": {"type": "s-construct", "modifier": {"type": "s-construct-normal"}, "constructor": {"type": "s-id", "id": {"type": "s-name", "name": "list"}}, "values": [{"type": "s-str", "value": "0+"}, {"type": "s-str", "value": "*0"}, {"type": "s-str", "value": "0+0"}, {"type": "s-str", "value": "0*0"}, {"type": "s-str", "value": "0 *0"}, {"type": "s-str", "value": "0* 0"}]}, "keyword-val": false}, {"type": "s-check", "name": "bad operator", "body": {"type": "s-block", "stmts": [{"type": "s-for", "iterator": {"type": "s-id", "id": {"type": "s-name", "name": "each"}}, "bindings": [{"type": "s-for-bind", "bind": {"type": "s-bind", "shadows": false, "name": {"type": "s-name", "name": "program"}, "ann": {"type": "a-blank"}}, "value": {"type": "s-id", "id": {"type": "s-name", "name": "bad-operator"}}}], "ann": {"type": "a-blank"}, "body": {"type": "s-block", "stmts": [{"type": "s-check-test", "op": {"type": "s-op-satisfies"}, "refinement": null, "left": {"type": "s-app", "fun": {"type": "s-id", "id": {"type": "s-name", "name": "get-parse-error"}}, "args": [{"type": "s-id", "id": {"type": "s-name", "name": "program"}}]}, "right": {"type": "s-dot", "obj": {"type": "s-id", "id": {"type": "s-name", "name": "ERR"}}, "field": "is-parse-error-bad-operator"}, "cause": null}]}, "blocky": false}]}, "keyword-check": true}, {"type": "s-let", "name": {"type": "s-bind", "shadows": false, "name": {"type": "s-name", "name": "bad-number"}, "ann": {"type": "a-blank"}}, "value": {"type": "s-construct", "modifier": {"type": "s-construct-normal"}, "constructor": {"type": "s-id", "id": {"type": "s-name", "name": "list"}}, "values": [{"type": "s-str", "value": ".0"}, {"type": "s-str", "value": "~.0"}, {"type": "s-str", "value": "foo.0"}]}, "keyword-val": false}, {"type": "s-check", "name": "bad-number", "body": {"type": "s-block", "stmts": [{"type": "s-for", "iterator": {"type": "s-id", "id": {"type": "s-name", "name": "each"}}, "bindings": [{"type": "s-for-bind", "bind": {"type": "s-bind", "shadows": false, "name": {"type": "s-name", "name": "program"}, "ann": {"type": "a-blank"}}, "value": {"type": "s-id", "id": {"type": "s-name", "name": "bad-number"}}}], "ann": {"type": "a-blank"}, "body": {"type": "s-block", "stmts": [{"type": "s-check-test", "op": {"type": "s-op-satisfies"}, "refinement": null, "left": {"type": "s-app", "fun": {"type": "s-id", "id": {"type": "s-name", "name": "get-parse-error"}}, "args": [{"type": "s-id", "id": {"type": "s-name", "name": "program"}}]}, "right": {"type": "s-dot", "obj": {"type": "s-id", "id": {"type": "s-name", "name": "ERR"}}, "field": "is-parse-error-bad-number"}, "cause": null}]}, "blocky": false}]}, "keyword-check": true}, {"type": "s-check", "name": "spacey-apps", "body": {"type": "s-block", "stmts": [{"type": "s-check-test", "op": {"type": "s-op-satisfies"}, "refinement": null, "left": {"type": "s-app", "fun": {"type": "s-id", "id": {"type": "s-name", "name": "get-parse-error"}}, "args": [{"type": "s-str", "value": "foo ()"}]}, "right": {"type": "s-dot", "obj": {"type": "s-id", "id": {"type": "s-name", "name": "ERR"}}, "field": "is-parse-error-bad-app"}, "cause": null}, {"type": "s-check-test", "op": {"type": "s-op-satisfies"}, "refinement": null, "left": {"type": "s-app", "fun": {"type": "s-id", "id": {"type": "s-name", "name": "get-parse-error"}}, "args": [{"type": "s-str", "value": "foo (x, y)"}]}, "right": {"type": "s-dot", "obj": {"type": "s-id", "id": {"type": "s-name", "name": "ERR"}}, "field": "is-parse-error-bad-app"}, "cause": null}, {"type": "s-check-test", "op": {"type": "s-op-is"}, "refinement": null, "left": {"type": "s-app", "fun": {"type": "s-dot", "obj": {"type": "s-id", "id": {"type": "s-name", "name": "P"}}, "field": "does-parse"}, "args": [{"type": "s-str", "value": "foo (x)"}]}, "right": {"type": "s-bool", "value": true}, "cause": null}, {"type": "s-check-test", "op": {"type": "s-op-is"}, "refinement": {"type": "s-dot", "obj": {"type": "s-id", "id": {"type": "s-name", "name": "C"}}, "field": "output"}, "left": {"type": "s-app", "fun": {"type": "s-dot", "obj": {"type": "s-id", "id": {"type": "s-name", "name": "C"}}, "field": "run-str"}, "args": [{"type": "s-str", "value": "foo (x)"}]}, "right": {"type": "s-app", "fun": {"type": "s-dot", "obj": {"type": "s-id", "id": {"type": "s-name", "name": "C"}}, "field": "compile-error"}, "args": [{"ann": {"type": "a-blank"}, "body": {"type": "s-block", "stmts": [{"type": "s-op", "op-l": "srcloc(\"/tmp/pyret_lazy_cache_input_9a08a5bf38fd743f665765ba351e2b90c801ecee38b0c77ea15f42198ffc44f3.arr\", 101, 80, 2093, 101, 83, 2096)", "op": "opand", "left": {"type": "s-app", "fun": {"type": "s-dot", "obj": {"type": "s-id", "id": {"type": "s-name", "name": "CS"}}, "field": "is-same-line"}, "args": [{"type": "s-id", "id": {"type": "s-name", "name": "e"}}]}, "right": {"type": "s-dot", "obj": {"type": "s-id", "id": {"type": "s-name", "name": "e"}}, "field": "b-is-paren"}}]}, "params": [], "check": null, "name": "", "blocky": false, "doc": "", "type": "s-lam", "check-loc": null, "args": [{"type": "s-bind", "shadows": false, "name": {"type": "s-name", "name": "e"}, "ann": {"type": "a-blank"}}]}]}, "cause": null}]}, "keyword-check": true}, {"type": "s-let", "name": {"type": "s-bind", "shadows": false, "name": {"type": "s-name", "name": "spacey-headers"}, "ann": {"type": "a-blank"}}, "value": {"type": "s-construct", "modifier": {"type": "s-construct-normal"}, "constructor": {"type": "s-id", "id": {"type": "s-name", "name": "list"}}, "values": [{"type": "s-str", "value": "fun foo (): 6 end"}, {"type": "s-str", "value": "fun foo (x): 6 end"}, {"type": "s-str", "value": "fun foo (x :: Number): 6 end"}, {"type": "s-str", "value": "fun foo (x, y): 6 end"}, {"type": "s-str", "value": "lam (): 6 end"}, {"type": "s-str", "value": "lam (x): 6 end"}, {"type": "s-str", "value": "lam (x :: Number): 6 end"}, {"type": "s-str", "value": "lam (x, y): 6 end"}, {"type": "s-str", "value": "{ (): 6 }"}, {"type": "s-str", "value": "{ (x): 6 }"}, {"type": "s-str", "value": "{ (x :: Number): 6 }"}, {"type": "s-str", "value": "{ (x, y): 6 }"}, {"type": "s-str", "value": "method (): 6 end"}, {"type": "s-str", "value": "method (x): 6 end"}, {"type": "s-str", "value": "method (x :: Number): 6 end"}, {"type": "s-str", "value": "method (x, y): 6 end"}, {"type": "s-str", "value": "data Foo: z with: method foo (): 6 end end"}, {"type": "s-str", "value": "data Foo: z with: method foo (x): 6 end end"}, {"type": "s-str", "value": "data Foo: z with: method foo (x :: Number): 6 end end"}, {"type": "s-str", "value": "data Foo: x with: method foo (x, y): 6 end end"}, {"type": "s-str", "value": "{ x : method (): 6 end }"}, {"type": "s-str", "value": "{ x : method (x): 6 end }"}, {"type": "s-str", "value": "{ x : method (x :: Number): 6 end }"}, {"type": "s-str", "value": "{ x : method (x, y): 6 end }"}, {"type": "s-str", "value": "{ method x (): 6 end }"}, {"type": "s-str", "value": "{ method x (x): 6 end }"}, {"type": "s-str", "value": "{ method x (x :: Number): 6 end }"}, {"type": "s-str", "value": "{ method x (x, y): 6 end }"}]}, "keyword-val": false}, {"type": "s-check", "name": "spacey-headers", "body": {"type": "s-block", "stmts": [{"type": "s-for", "iterator": {"type": "s-id", "id": {"type": "s-name", "name": "each"}}, "bindings": [{"type": "s-for-bind", "bind": {"type": "s-bind", "shadows": false, "name": {"type": "s-name", "name": "program"}, "ann": {"type": "a-blank"}}, "value": {"type": "s-id", "id": {"type": "s-name", "name": "spacey-headers"}}}], "ann": {"type": "a-blank"}, "body": {"type": "s-block", "stmts": [{"type": "s-check-test", "op": {"type": "s-op-satisfies"}, "refinement": null, "left": {"type": "s-app", "fun": {"type": "s-id", "id": {"type": "s-name", "name": "get-parse-error"}}, "args": [{"type": "s-id", "id": {"type": "s-name", "name": "program"}}]}, "right": {"type": "s-dot", "obj": {"type": "s-id", "id": {"type": "s-name", "name": "ERR"}}, "field": "is-parse-error-bad-fun-header"}, "cause": null}]}, "blocky": false}]}, "keyword-check": true}]}}