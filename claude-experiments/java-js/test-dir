#!/bin/bash

# Simple wrapper for DirectoryTester
# Usage: ./test-dir <directory> [--max-failures=N]

if [ $# -eq 0 ]; then
    echo "Usage: ./test-dir <directory> [--max-failures=N]"
    echo ""
    echo "Examples:"
    echo "  ./test-dir ../my-project"
    echo "  ./test-dir ../my-project --max-failures=10"
    echo "  ./test-dir ~/code/app --max-failures=5"
    exit 1
fi

# Build args string
ARGS="$1"
if [ $# -gt 1 ]; then
    ARGS="$ARGS $2"
fi

mvn exec:java -Dexec.mainClass="com.jsparser.DirectoryTester" -Dexec.args="$ARGS" -q 2>&1 | grep -v "WARNING:"
